<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sortable Test 9: Visual Feedback</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            padding: 2rem;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        h1 {
            color: white;
            margin-bottom: 1rem;
            font-size: 2rem;
        }

        .test-info {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .test-info h2 {
            color: #00f2fe;
            margin-bottom: 0.5rem;
            font-size: 1.25rem;
        }

        .test-info p {
            color: #4a5568;
            line-height: 1.6;
        }

        .test-info code {
            background: #f7fafc;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #e53e3e;
            font-size: 0.875rem;
        }

        .test-container {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
        }

        .test-container h3 {
            color: #2d3748;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .sortable-list {
            list-style: none;
            padding: 1rem;
            background: #f7fafc;
            border-radius: 6px;
            border: 2px solid #e2e8f0;
            min-height: 250px;
        }

        .sortable-item {
            padding: 1.25rem;
            margin-bottom: 0.75rem;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border-radius: 6px;
            cursor: grab;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 1rem;
            font-weight: 600;
            user-select: none;
            position: relative;
        }

        .sortable-item:last-child {
            margin-bottom: 0;
        }

        /* Enhanced visual feedback */
        .sortable-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0, 242, 254, 0.4);
        }

        .sortable-item.dragging {
            opacity: 0.6;
            cursor: grabbing;
            transform: scale(1.08) rotate(2deg);
            box-shadow: 0 12px 24px rgba(0, 242, 254, 0.6);
            z-index: 1000;
            animation: pulse 0.6s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 12px 24px rgba(0, 242, 254, 0.6);
            }
            50% {
                box-shadow: 0 12px 32px rgba(0, 242, 254, 0.8);
            }
        }

        .item-icon {
            font-size: 1.5rem;
            transition: transform 0.3s;
        }

        .sortable-item.dragging .item-icon {
            transform: rotate(15deg) scale(1.2);
        }

        .item-handle {
            margin-left: auto;
            opacity: 0.5;
            font-size: 1.25rem;
            transition: opacity 0.3s;
        }

        .sortable-item:hover .item-handle {
            opacity: 1;
        }

        .feature-list {
            background: #edf2f7;
            padding: 1rem;
            border-radius: 6px;
            margin-top: 1rem;
            border-left: 4px solid #00f2fe;
        }

        .feature-list h4 {
            color: #2d3748;
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }

        .feature-list ul {
            margin-left: 1.5rem;
            color: #4a5568;
            font-size: 0.875rem;
        }

        .feature-list li {
            margin-bottom: 0.25rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé® Phase 4.3: Visual Feedback</h1>

        <div class="test-info">
            <h2>What We're Testing</h2>
            <p>
                This test showcases enhanced visual feedback during drag operations.
                The <code>.dragging</code> class is added/removed to provide smooth
                visual transitions and user feedback.
            </p>
            <p style="margin-top: 1rem;">
                <strong>Visual Features:</strong><br>
                ‚Ä¢ Opacity change when dragging<br>
                ‚Ä¢ Scale and rotation transform<br>
                ‚Ä¢ Pulsing shadow animation<br>
                ‚Ä¢ Icon rotation<br>
                ‚Ä¢ Smooth CSS transitions
            </p>
        </div>

        <div class="test-container">
            <h3>‚ú® Sortable List with Enhanced Visual Feedback</h3>

            <script type="text/hyperscript">
behavior Sortable()
  on pointerdown(clientX, clientY)
    set draggedItem to event.target.closest('.sortable-item')
    if no draggedItem exit
    halt the event
    add .dragging to draggedItem
    set initialHTML to my innerHTML
    trigger sortable:start
    repeat until event pointerup from document
      wait for pointermove(clientY) or pointerup from document
      set items to <.sortable-item/> in me
      set targetItem to null
      repeat for item in items
        if item is not draggedItem
          measure item's top
          set itemTop to it
          measure item's height
          set itemHeight to it
          set itemMid to itemTop + (itemHeight / 2)
          if clientY < itemMid
            set targetItem to item
            exit
          end
        end
      end
      if targetItem
        call me.insertBefore(draggedItem, targetItem)
      else
        call me.appendChild(draggedItem)
      end
      trigger sortable:move
    end
    remove .dragging from draggedItem
    trigger sortable:end
    if my innerHTML is not initialHTML
      trigger sortable:change
    end
  end
end
            </script>

            <ul id="todo-list" class="sortable-list"
                _="install Sortable()">
                <li class="sortable-item">
                    <span class="item-icon">üé®</span>
                    <span>Design mockups</span>
                    <span class="item-handle">‚ãÆ‚ãÆ</span>
                </li>
                <li class="sortable-item">
                    <span class="item-icon">üíª</span>
                    <span>Code implementation</span>
                    <span class="item-handle">‚ãÆ‚ãÆ</span>
                </li>
                <li class="sortable-item">
                    <span class="item-icon">üß™</span>
                    <span>Test everything</span>
                    <span class="item-handle">‚ãÆ‚ãÆ</span>
                </li>
                <li class="sortable-item">
                    <span class="item-icon">üöÄ</span>
                    <span>Deploy to production</span>
                    <span class="item-handle">‚ãÆ‚ãÆ</span>
                </li>
                <li class="sortable-item">
                    <span class="item-icon">üéâ</span>
                    <span>Celebrate launch</span>
                    <span class="item-handle">‚ãÆ‚ãÆ</span>
                </li>
            </ul>

            <div class="feature-list">
                <h4>üé≠ Visual Effects Applied:</h4>
                <ul>
                    <li><strong>Hover state:</strong> Lift item slightly with enhanced shadow</li>
                    <li><strong>Drag cursor:</strong> Changes from grab to grabbing</li>
                    <li><strong>Opacity:</strong> 60% transparency when dragging</li>
                    <li><strong>Transform:</strong> Scale 1.08x + 2¬∞ rotation</li>
                    <li><strong>Shadow animation:</strong> Pulsing effect during drag</li>
                    <li><strong>Icon animation:</strong> Rotates 15¬∞ and scales up</li>
                    <li><strong>Smooth transitions:</strong> Cubic-bezier easing</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Load HyperFixi -->
    <script src="dist/hyperfixi-browser.js"></script>

    <script>
        console.log('üöÄ HyperFixi loaded and ready');
        console.log('üìç Test page: test-sortable-visual.html');
        console.log('üéØ Testing: Visual feedback and animations');
        console.log('');
        console.log('üé® Drag items to see enhanced visual effects!');
    </script>
</body>
</html>
