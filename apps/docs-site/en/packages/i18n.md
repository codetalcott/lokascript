# @lokascript/i18n

Grammar transformation and translation for hyperscript. Transform code between languages for documentation and teaching.

## When to Use

| Package                  | Purpose                            | Use Case                                      |
| ------------------------ | ---------------------------------- | --------------------------------------------- |
| **@lokascript/semantic** | Parse code written in any language | Users **write** hyperscript in their language |
| **@lokascript/i18n**     | Transform code between languages   | **Translate** code for docs/teaching          |

Use `@lokascript/i18n` when you need to show code examples in multiple languages.

## Installation

```bash
npm install @lokascript/i18n
```

## Quick Start

```javascript
import { HyperscriptTranslator } from '@lokascript/i18n';

const translator = new HyperscriptTranslator({ locale: 'en' });

// Translate English to Japanese
const japanese = translator.translate('on click toggle .active', {
  from: 'en',
  to: 'ja',
});
// → 'クリック で .active を 切り替え'

// Translate Spanish to English
const english = translator.translate('en clic alternar .activo', {
  from: 'es',
  to: 'en',
});
// → 'on click toggle .activo'

// Detect language
const lang = translator.detectLanguage('si verdadero entonces registrar "hola"');
// → 'es'
```

## Supported Languages (13)

| Language   | Code | Word Order | Features                     |
| ---------- | ---- | ---------- | ---------------------------- |
| English    | `en` | SVO        | Base language                |
| Spanish    | `es` | SVO        | Pluralization, morphology    |
| French     | `fr` | SVO        | Pluralization                |
| German     | `de` | V2         | Pluralization                |
| Portuguese | `pt` | SVO        | Full dictionary              |
| Japanese   | `ja` | SOV        | Native idioms, morphology    |
| Korean     | `ko` | SOV        | Native idioms, morphology    |
| Chinese    | `zh` | SVO        | Particle handling            |
| Arabic     | `ar` | VSO        | RTL, morphology              |
| Turkish    | `tr` | SOV        | Agglutinative, vowel harmony |
| Indonesian | `id` | SVO        | Agglutinative                |
| Quechua    | `qu` | SOV        | Agglutinative                |
| Swahili    | `sw` | SVO        | Noun class system            |

## API Reference

### HyperscriptTranslator

```javascript
const translator = new HyperscriptTranslator({
  locale: 'en', // Default locale
  fallbackLocale: 'en', // Fallback if translation missing
  detectLocale: true, // Auto-detect from content
  rtlLocales: ['ar'], // RTL languages
});

// Translate
translator.translate(text, { from: 'en', to: 'ja' });

// Translate with details
translator.translateWithDetails(text, { from: 'en', to: 'ja' });
// Returns: { translated, tokens, warnings }

// Detect language
translator.detectLanguage(text);

// Check RTL
translator.isRTL('ar'); // true

// Get supported locales
translator.getSupportedLocales();

// Validate dictionary
translator.validateDictionary('es');
```

### GrammarTransformer

Transform between word orders:

```javascript
import { GrammarTransformer } from '@lokascript/i18n';

const transformer = new GrammarTransformer();

// SVO (English) to SOV (Japanese)
transformer.transform('toggle .active on me', 'en', 'ja');
// → '.active を me に 切り替え'

// SVO to VSO (Arabic)
transformer.transform('toggle .active', 'en', 'ar');
// → 'بدّل .active'
```

## Build Tool Integration

### Vite

```javascript
// vite.config.js
import { hyperscriptI18nVitePlugin } from '@lokascript/i18n/plugins/vite';

export default {
  plugins: [
    hyperscriptI18nVitePlugin({
      sourceLocale: 'es',
      targetLocale: 'en',
      preserveOriginal: true,
    }),
  ],
};
```

### Webpack

```javascript
// webpack.config.js
const { HyperscriptI18nWebpackPlugin } = require('@lokascript/i18n/plugins/webpack');

module.exports = {
  plugins: [
    new HyperscriptI18nWebpackPlugin({
      sourceLocale: 'es',
      targetLocale: 'en',
    }),
  ],
};
```

## CLI Usage

```bash
# Install globally
npm install -g @lokascript/i18n

# Translate a file
lokascript-translate input.html output.html --from es --to en

# Translate a directory
lokascript-translate src/ dist/ --from es --to en
```

## Custom Dictionaries

```javascript
const customDictionary = {
  commands: {
    on: 'sur',
    click: 'cliquer',
    toggle: 'basculer',
  },
  modifiers: {
    to: 'à',
    from: 'de',
  },
  events: {
    click: 'cliquer',
    hover: 'survol',
  },
  logical: {
    if: 'si',
    else: 'sinon',
  },
  temporal: {
    then: 'puis',
    wait: 'attendre',
  },
};

translator.addDictionary('fr-custom', customDictionary);
```

## Word Order Transformation

| Order   | Languages                 | Pattern             |
| ------- | ------------------------- | ------------------- |
| **SVO** | English, Spanish, Chinese | Subject-Verb-Object |
| **SOV** | Japanese, Korean, Turkish | Subject-Object-Verb |
| **VSO** | Arabic                    | Verb-Subject-Object |

Example transformations:

```
English (SVO):  on click toggle .active on me
Japanese (SOV): クリック で .active を me に 切り替え
Arabic (VSO):   عند النقر بدّل .active على me
```

## Use Case: Documentation

Generate multilingual documentation:

```javascript
const examples = ['on click toggle .active', 'on submit fetch /api/save', 'on load show #content'];

const languages = ['en', 'es', 'ja', 'ko'];

for (const example of examples) {
  for (const lang of languages) {
    const translated = translator.translate(example, {
      from: 'en',
      to: lang,
    });
    console.log(`${lang}: ${translated}`);
  }
}
```

## Next Steps

- [Grammar Transformation](/en/guide/grammar) - Word order details
- [Multilingual Guide](/en/guide/multilingual) - Language support
- [@lokascript/semantic](/en/packages/semantic) - Parsing multilingual code
